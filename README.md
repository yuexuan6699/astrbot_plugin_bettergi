# BetterGI 远程控制插件

AstrBot 插件，用于远程控制 BetterGI（更好的原神）。

## 应用项目
- **[BetterGI（更好的原神）](https://www.bettergi.com/)**
- **[AastrBot](https://docs.astrbot.app/)**

## 功能特性

- **远程运行命令** - 通过 QQ 机器人远程执行 BetterGI 命令
- **定时任务** - 支持设置定时自动执行任务
- **队列管理？** - （有，但是没法自动切换，自己弄去吧）命令队列管理，支持查看和删除队列中的任务
- **状态监控** - 查看当前运行状态和屏幕截图
- **权限控制** - 支持设置允许使用的用户白名单

## 注意事项

- **填写规范** - 填写的命令中，
`{填写一条龙配置的名称}` 部分需要替换为实际的一条龙配置名称，
一条龙配置完整填写如: `--startOneDragon 每日自动`。
`{填写配置组的名称}` 部分需要替换为实际的配置组名称，
全自动中调度器的配置组填写如: `--startGroups 伐木`
必须按以上方式写正确，否则就不能正常完整运行了（反正我就懒得改了）
- **其他**
1. 确保BetterGI路径正确，且目录下存在 `BetterGI.exe`
2. 如需限制使用权限，在 `better_master` 中添加允许的用户 ID
3. 插件会自动清理 7 天前的截图文件
4. 命令执行超时默认为 1 小时

## 配置说明

### 基础配置

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `bettergi_dir` | BetterGI 安装目录 | `根据实际安装路径填写，例如：d:BetterGI` |
| `default_command` | 默认执行的命令 | `--startOneDragon {填写一条龙配置的名称}` |
| `debug_log` | 调试日志开关 | `false` |
| `toggle_audio_service` | 运行时禁用声音 | `false` |
| `command_timeout` | 命令执行超时时间（秒） | `3600` |

### 定时任务配置

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `enable` | 是否启用定时任务 | `false` |
| `run_time` | 定时运行时间（格式：HH:MM） | `00:00` |
| `command` | 定时任务执行的命令 | `--startOneDragon {填写一条龙配置的名称}` |

### 手动触发配置

| 配置项 | 说明 |
|--------|------|
| `enable` | 是否启用手动触发 |
| `command` | 手动触发的命令列表 |

### 权限配置

| 配置项 | 说明 |
|--------|------|
| `better_master` | 有权限使用插件的用户 ID 列表（为空则所有人可用） |

## 使用方法

### 基础命令

| 命令 | 说明 |
|------|------|
| `better运行` / `better run` / `better启动` | 运行默认命令 |
| `better状态` / `better status` | 查看当前状态（含屏幕截图） |
| `better停止` / `better stop` | 停止当前任务 |
| `better帮助` / `better help` | 显示帮助信息 |

### 运行指定命令

```
better运行 --startOneDragon {填写一条龙配置的名称}
better运行 --startGroups {填写配置组的名称}
```

### 从预设列表选择

```
better运行 选择    # 显示命令列表
better运行 1       # 直接运行第1个预设命令
```

### 队列管理

```
better删除 list    # 查看队列
better删除 1       # 删除队列中第1个命令
```

## 安装和依赖

自己去看astrbot文档就可以了，连安装都不会就别用，这个的配置也挺复杂的啦！

使用到的依赖，自动安装了也不会出问题
- Pillow >= 9.0.0
- psutil >= 5.9.0

## 许可证

跟随那两个项目
